
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Manipulating time-series &#8212; Assessing Solar</title>
    
  <link rel="stylesheet" href="../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/sphinx-book-theme.c441f2ba0852f4cabcb80105e3a46ae6.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.7d483ff0a819d6edff12ce0b1ead3928.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Overview" href="solar_resource_data_overview.html" />
    <link rel="prev" title="Solar Radiation Modelling" href="solar_radiation_modelling.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/assessing_solar_logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Assessing Solar</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <p class="caption collapsible-parent">
 <span class="caption-text">
  Guide
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="introduction.html">
   Introduction
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Solar radiation modeling
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="solar_components_and_geometry.html">
   Solar Components and Geometry
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="solar_position.html">
   Solar position
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="solar_radiation_modelling.html">
   Solar Radiation Modelling
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Manipulating time-series
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Solar resource data
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="solar_resource_data_overview.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="satellite_data.html">
   Satellite data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="reanalysis_data.html">
   Reanalysis data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ground_measurements.html">
   Ground measured solar radiation data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="quality_asessment.html">
   Quality assessment of solar irradiance data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="benchmarking.html">
   Benchmarking
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Forecasting
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="forecasting_overview.html">
   Forecasting techniques
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="persistent_forecasting.html">
   Persistent forecasting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="satellite_forecasting.html">
   Satellite forecasting
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Solar power modeling
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="solar_power_modelling.html">
   Solar Power Modelling
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/notebooks/manipulating_time_series.ipynb.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/solar-python/solar-python"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/solar-python/solar-python/issues/new?title=Issue%20on%20page%20%2Fnotebooks/manipulating_time_series.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>


            <!-- Full screen (wrap in <a> to have style consistency -->
            <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                    data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                    title="Fullscreen mode"><i
                        class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/solar-python/solar-python/master?urlpath=lab/tree/sphinx/notebooks/manipulating_time_series.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i>
            Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#time-series-handling-a-id-timeseries-handling-a">
   Time-series handling
   <a id="timeseries_handling">
   </a>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#time-series-when-timestamps-are-available">
     Time-series when timestamps are available:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#time-series-when-date-and-time-are-available">
     Time-series when date and time are available:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#time-series-when-the-time-data-is-split-in-multiple-columns">
     Time-series when the time data is split in multiple columns:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#time-series-when-the-timestamp-is-given-as-epoch-unix-time">
     Time-series when the timestamp is given as epoch (Unix Time)
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#down-and-up-sampling-time-series-data-a-id-timeseries-downup-sampling-a">
   Down and up-sampling time-series data
   <a id="timeseries_downup_sampling">
   </a>
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#asfreq-vs-resample">
     asfreq vs. resample
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#down-sampling-the-data-in-a-time-series">
     Down-sampling the data in a time-series
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#producing-hourly-average-irradiance-from-minutely-observations">
       Producing hourly average irradiance from minutely observations
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#producing-time-series-of-monthly-total-ghi-dhi-dni-irradiation-from-minutely-observations">
         Producing time-series of monthly total GHI, DHI, DNI irradiation from minutely observations
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#up-sampling-the-data-in-a-time-series">
     Up-sampling the data in a time-series
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#producing-half-hourly-irradiance-series-from-hourly-observations">
       Producing half-hourly irradiance series from hourly observations
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#interpolating-time-series-data-a-id-timeseries-interpolation-a">
   Interpolating time-series data
   <a id="timeseries_interpolation">
   </a>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualizing-time-series-data-a-id-timeseries-visualization-a">
   Visualizing time-series data
   <a id="timeseries_visualization">
   </a>
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#section-summary">
   Section summary
  </a>
 </li>
</ul>

        </nav>
        
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="manipulating-time-series">
<h1>Manipulating time-series<a class="headerlink" href="#manipulating-time-series" title="Permalink to this headline">¶</a></h1>
<p>Time-series are a key element when assessing solar resource data. In this section, we present several examples to learn how to deal with different formats in the data and few common tasks to prepare our time-series for later analysis, such as down and up-sampling data when we need different temporal resolution than that initially available or interpolating missing values in the data.</p>
<p>The dataset used in the examples of this section is an extract of the dataset from the Technical University of Denmark used in the previous section on Quality Assessment with 1-minute GHI, DHI and DNI measurements, which has been customised by adding columns with time-related data and sliced to take the data from 2019 to perform the examples. The dataset used in this section is available for download in csv format <a class="reference external" href="https://www.dropbox.com/s/0wnz5b7454mit8o/solar_irradiance_dtu_2018_2020.csv?dl=0">here</a>.</p>
<p>In this section, we cover:</p>
<ul class="simple">
<li><p><a class="reference external" href="#timeseries_handling">Time-series handling</a></p></li>
<li><p><a class="reference external" href="#timeseries_downup_sampling">Down and up-sampling time-series data</a></p></li>
<li><p><a class="reference external" href="#timeseries_interpolation">Interpolating time-series data</a></p></li>
<li><p><a class="reference external" href="#timeseries_visualization">Visualizating time-series data</a></p></li>
</ul>
<div class="section" id="time-series-handling-a-id-timeseries-handling-a">
<h2>Time-series handling <a id='timeseries_handling'></a><a class="headerlink" href="#time-series-handling-a-id-timeseries-handling-a" title="Permalink to this headline">¶</a></h2>
<p>Datasets often come in different formats depending on the source. Those formats sometimes cannot be used straightaway to build a time-series and may require additional processing steps before building the time-series. For example:</p>
<ul class="simple">
<li><p><strong>What if date and time are in different columns?</strong></p></li>
<li><p><strong>What if the year, month, day and time are in separate columns?</strong></p></li>
<li><p><strong>How to the define the timestamp format for a particular dataset?</strong></p></li>
<li><p><strong>How to deal with timestamp issues, local vs. universal (UTC) time?</strong></p></li>
</ul>
<p>This subsection presents several examples to deal with different formats in which time-series data could come and shows how to build a time-series or <em>datetime series</em>, as known in Python, for later analysis. The processing steps to build time-series are based on <a class="reference external" href="https://pandas.pydata.org/">pandas library</a>.</p>
<p>Let’s load the data and start!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Importing the needed libraries</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="c1"># Let&#39;s first load the data into a DataFrame and inspect it</span>
<span class="n">data_path</span> <span class="o">=</span> <span class="s1">&#39;https://www.dropbox.com/s/qd8aw2ug8s7dq4u/solar_irradiance_dtu_2019_extended.csv?dl=1&#39;</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Let&#39;s check the dimensions of the DataFrame</span>
<span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(525600, 14)
</pre></div>
</div>
</div>
</div>
<p>A quite large DataFrame with 525,600 rows and 14 columns. Let’s have a look to the columns and visualize the first and last rows in the dataframe:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;Time(utc)&#39;, &#39;GHI&#39;, &#39;DHI&#39;, &#39;DNI&#39;, &#39;zenith&#39;, &#39;azimuth&#39;, &#39;year&#39;, &#39;month&#39;,
       &#39;day&#39;, &#39;hour&#39;, &#39;minute&#39;, &#39;date&#39;, &#39;time&#39;, &#39;epoch&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># First 3 rows in the dataframe</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Time(utc)</th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>hour</th>
      <th>minute</th>
      <th>date</th>
      <th>time</th>
      <th>epoch</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019-01-01 00:00:00</td>
      <td>-0.1625</td>
      <td>-0.1552</td>
      <td>-0.084945</td>
      <td>146.123393</td>
      <td>19.602275</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2019-01-01</td>
      <td>00:00:00</td>
      <td>1.546301e+09</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2019-01-01 00:01:00</td>
      <td>-0.1670</td>
      <td>-0.1573</td>
      <td>-0.066069</td>
      <td>146.075737</td>
      <td>20.005652</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>2019-01-01</td>
      <td>00:01:00</td>
      <td>1.546301e+09</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2019-01-01 00:02:00</td>
      <td>-0.1407</td>
      <td>-0.1552</td>
      <td>-0.041295</td>
      <td>146.027152</td>
      <td>20.408170</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>2019-01-01</td>
      <td>00:02:00</td>
      <td>1.546301e+09</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Last 3 rows in the dataframe</span>
<span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Time(utc)</th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>hour</th>
      <th>minute</th>
      <th>date</th>
      <th>time</th>
      <th>epoch</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>525597</th>
      <td>2019-12-31 23:57:00</td>
      <td>-2.556</td>
      <td>-2.594</td>
      <td>-0.674737</td>
      <td>146.275174</td>
      <td>18.440430</td>
      <td>2019</td>
      <td>12</td>
      <td>31</td>
      <td>23</td>
      <td>57</td>
      <td>2019-12-31</td>
      <td>23:57:00</td>
      <td>1.577837e+09</td>
    </tr>
    <tr>
      <th>525598</th>
      <td>2019-12-31 23:58:00</td>
      <td>-2.768</td>
      <td>-2.739</td>
      <td>-0.652379</td>
      <td>146.230206</td>
      <td>18.846350</td>
      <td>2019</td>
      <td>12</td>
      <td>31</td>
      <td>23</td>
      <td>58</td>
      <td>2019-12-31</td>
      <td>23:58:00</td>
      <td>1.577837e+09</td>
    </tr>
    <tr>
      <th>525599</th>
      <td>2019-12-31 23:59:00</td>
      <td>-2.707</td>
      <td>-2.718</td>
      <td>-0.634712</td>
      <td>146.184298</td>
      <td>19.251449</td>
      <td>2019</td>
      <td>12</td>
      <td>31</td>
      <td>23</td>
      <td>59</td>
      <td>2019-12-31</td>
      <td>23:59:00</td>
      <td>1.577837e+09</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Now that we know better the characteristics of our data: 1-minute irradiance measurements for 2019, we can start build the timeseries in different ways.</p>
<div class="section" id="time-series-when-timestamps-are-available">
<h3>Time-series when timestamps are available:<a class="headerlink" href="#time-series-when-timestamps-are-available" title="Permalink to this headline">¶</a></h3>
<p>When timestamps are available, the most straightforward way to build the DataFrame with a datetime index is to provide the columns where the index and the timestamps are located with the arguments <em>index_col</em> and <em>parse_dates</em>, respectively.</p>
<p>Let’s see how!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load data with available timestamps</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="c1"># See the first 3 rows</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>hour</th>
      <th>minute</th>
      <th>date</th>
      <th>time</th>
      <th>epoch</th>
    </tr>
    <tr>
      <th>Time(utc)</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00</th>
      <td>-0.1625</td>
      <td>-0.1552</td>
      <td>-0.084945</td>
      <td>146.123393</td>
      <td>19.602275</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2019-01-01</td>
      <td>00:00:00</td>
      <td>1.546301e+09</td>
    </tr>
    <tr>
      <th>2019-01-01 00:01:00</th>
      <td>-0.1670</td>
      <td>-0.1573</td>
      <td>-0.066069</td>
      <td>146.075737</td>
      <td>20.005652</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>2019-01-01</td>
      <td>00:01:00</td>
      <td>1.546301e+09</td>
    </tr>
    <tr>
      <th>2019-01-01 00:02:00</th>
      <td>-0.1407</td>
      <td>-0.1552</td>
      <td>-0.041295</td>
      <td>146.027152</td>
      <td>20.408170</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>2019-01-01</td>
      <td>00:02:00</td>
      <td>1.546301e+09</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The timestamps can be localized to a particular time zone in several ways. Universal Time Coordinated (UTC) is usually provided for many solar radiation data networks and platforms like the BSRN, SoDa, PVGIS, NSRDB, etc. However, data can be also reported in local time.</p>
<p>Below, we have 2 examples on how to <strong>localize the time-series</strong>. The first way (for data in UTC) passes the argument <em>date_parser</em> when loading the csv file.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Localize the time-series when loading the file (for data in UTC)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">date_parser</span><span class="o">=</span><span class="k">lambda</span> <span class="n">col</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="c1"># See the first 3 rows</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>hour</th>
      <th>minute</th>
      <th>date</th>
      <th>time</th>
      <th>epoch</th>
    </tr>
    <tr>
      <th>Time(utc)</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00+00:00</th>
      <td>-0.1625</td>
      <td>-0.1552</td>
      <td>-0.084945</td>
      <td>146.123393</td>
      <td>19.602275</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2019-01-01</td>
      <td>00:00:00</td>
      <td>1.546301e+09</td>
    </tr>
    <tr>
      <th>2019-01-01 00:01:00+00:00</th>
      <td>-0.1670</td>
      <td>-0.1573</td>
      <td>-0.066069</td>
      <td>146.075737</td>
      <td>20.005652</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>2019-01-01</td>
      <td>00:01:00</td>
      <td>1.546301e+09</td>
    </tr>
    <tr>
      <th>2019-01-01 00:02:00+00:00</th>
      <td>-0.1407</td>
      <td>-0.1552</td>
      <td>-0.041295</td>
      <td>146.027152</td>
      <td>20.408170</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>2019-01-01</td>
      <td>00:02:00</td>
      <td>1.546301e+09</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Alternatively, the function <em>tz_localize</em> can be used to localize the values in a timezone-naive series. For other timezones, you can find the options for valid timezone strings in this <a class="reference external" href="https://pvlib-python.readthedocs.io/en/stable/timetimezones.html">link</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the data</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="c1"># Localize the index of the dataframe using &#39;tz_localize&#39;</span>
<span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">&#39;UTC&#39;</span><span class="p">)</span>
<span class="c1"># See the first 3 rows</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>hour</th>
      <th>minute</th>
      <th>date</th>
      <th>time</th>
      <th>epoch</th>
    </tr>
    <tr>
      <th>Time(utc)</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00+00:00</th>
      <td>-0.1625</td>
      <td>-0.1552</td>
      <td>-0.084945</td>
      <td>146.123393</td>
      <td>19.602275</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2019-01-01</td>
      <td>00:00:00</td>
      <td>1.546301e+09</td>
    </tr>
    <tr>
      <th>2019-01-01 00:01:00+00:00</th>
      <td>-0.1670</td>
      <td>-0.1573</td>
      <td>-0.066069</td>
      <td>146.075737</td>
      <td>20.005652</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>2019-01-01</td>
      <td>00:01:00</td>
      <td>1.546301e+09</td>
    </tr>
    <tr>
      <th>2019-01-01 00:02:00+00:00</th>
      <td>-0.1407</td>
      <td>-0.1552</td>
      <td>-0.041295</td>
      <td>146.027152</td>
      <td>20.408170</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>2019-01-01</td>
      <td>00:02:00</td>
      <td>1.546301e+09</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We see how both examples, with <em>date_parser</em> and <em>tz_localize</em>, return the same DataFrame.</p>
</div>
<div class="section" id="time-series-when-date-and-time-are-available">
<h3>Time-series when date and time are available:<a class="headerlink" href="#time-series-when-date-and-time-are-available" title="Permalink to this headline">¶</a></h3>
<p>When date and time are available in separate columns, a timestamp can be created in a new column and then the new column can be set as index and localized. Let’s have a look how to do that:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the data</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># New column with the date and the time </span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;T&#39;</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span>
<span class="c1"># Convert the new column into datetime as we pass the format as in a string as an argument</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">T%H:%M:%S&#39;</span><span class="p">,</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Set the column &#39;datetime&#39; as index</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">])</span>
<span class="c1"># See the first 3 rows </span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Time(utc)</th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>hour</th>
      <th>minute</th>
      <th>date</th>
      <th>time</th>
      <th>epoch</th>
      <th>datetime</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00+00:00</th>
      <td>2019-01-01 00:00:00</td>
      <td>-0.1625</td>
      <td>-0.1552</td>
      <td>-0.084945</td>
      <td>146.123393</td>
      <td>19.602275</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2019-01-01</td>
      <td>00:00:00</td>
      <td>1.546301e+09</td>
      <td>2019-01-01 00:00:00+00:00</td>
    </tr>
    <tr>
      <th>2019-01-01 00:01:00+00:00</th>
      <td>2019-01-01 00:01:00</td>
      <td>-0.1670</td>
      <td>-0.1573</td>
      <td>-0.066069</td>
      <td>146.075737</td>
      <td>20.005652</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>2019-01-01</td>
      <td>00:01:00</td>
      <td>1.546301e+09</td>
      <td>2019-01-01 00:01:00+00:00</td>
    </tr>
    <tr>
      <th>2019-01-01 00:02:00+00:00</th>
      <td>2019-01-01 00:02:00</td>
      <td>-0.1407</td>
      <td>-0.1552</td>
      <td>-0.041295</td>
      <td>146.027152</td>
      <td>20.408170</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>2019-01-01</td>
      <td>00:02:00</td>
      <td>1.546301e+09</td>
      <td>2019-01-01 00:02:00+00:00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="time-series-when-the-time-data-is-split-in-multiple-columns">
<h3>Time-series when the time data is split in multiple columns:<a class="headerlink" href="#time-series-when-the-time-data-is-split-in-multiple-columns" title="Permalink to this headline">¶</a></h3>
<p>If time-related data are split across multiple columns, a timestamp can be created in a new column similarly than in the previous case. Let’s imagine our dataset would have the year, month, day, hour, and minute in separate columns. In that case, we could build our time-series as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the data</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># Let&#39;s reduce the code lines and define the new string within the &#39;to_datetime&#39; function</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;month&#39;</span><span class="p">,</span> <span class="s1">&#39;day&#39;</span><span class="p">,</span> <span class="s1">&#39;hour&#39;</span><span class="p">,</span> <span class="s1">&#39;minute&#39;</span><span class="p">]],</span> 
                                <span class="nb">format</span> <span class="o">=</span> <span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">%H:%M&#39;</span><span class="p">)</span>
<span class="c1"># Set the column &#39;datetime&#39; as index</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">])</span> 
<span class="c1"># Localize the datetime series</span>
<span class="n">df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">&#39;UTC&#39;</span><span class="p">)</span> 
<span class="c1"># See the first 3 rows </span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Time(utc)</th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>hour</th>
      <th>minute</th>
      <th>date</th>
      <th>time</th>
      <th>epoch</th>
      <th>datetime</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00+00:00</th>
      <td>2019-01-01 00:00:00</td>
      <td>-0.1625</td>
      <td>-0.1552</td>
      <td>-0.084945</td>
      <td>146.123393</td>
      <td>19.602275</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2019-01-01</td>
      <td>00:00:00</td>
      <td>1.546301e+09</td>
      <td>2019-01-01 00:00:00</td>
    </tr>
    <tr>
      <th>2019-01-01 00:01:00+00:00</th>
      <td>2019-01-01 00:01:00</td>
      <td>-0.1670</td>
      <td>-0.1573</td>
      <td>-0.066069</td>
      <td>146.075737</td>
      <td>20.005652</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>2019-01-01</td>
      <td>00:01:00</td>
      <td>1.546301e+09</td>
      <td>2019-01-01 00:01:00</td>
    </tr>
    <tr>
      <th>2019-01-01 00:02:00+00:00</th>
      <td>2019-01-01 00:02:00</td>
      <td>-0.1407</td>
      <td>-0.1552</td>
      <td>-0.041295</td>
      <td>146.027152</td>
      <td>20.408170</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>2019-01-01</td>
      <td>00:02:00</td>
      <td>1.546301e+09</td>
      <td>2019-01-01 00:02:00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="time-series-when-the-timestamp-is-given-as-epoch-unix-time">
<h3>Time-series when the timestamp is given as epoch (Unix Time)<a class="headerlink" href="#time-series-when-the-timestamp-is-given-as-epoch-unix-time" title="Permalink to this headline">¶</a></h3>
<p>If the dataset has epoch timestamps, the data could be loaded and can be converted to a datetime series as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the data</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_path</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># Convert epoch timestamps to datetime format and localized to UTC</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;epoch&#39;</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">utc</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Set datetime as index</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;datetime&#39;</span><span class="p">])</span> 
<span class="c1"># See the results</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Time(utc)</th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
      <th>year</th>
      <th>month</th>
      <th>day</th>
      <th>hour</th>
      <th>minute</th>
      <th>date</th>
      <th>time</th>
      <th>epoch</th>
      <th>datetime</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00+00:00</th>
      <td>2019-01-01 00:00:00</td>
      <td>-0.1625</td>
      <td>-0.1552</td>
      <td>-0.084945</td>
      <td>146.123393</td>
      <td>19.602275</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2019-01-01</td>
      <td>00:00:00</td>
      <td>1.546301e+09</td>
      <td>2019-01-01 00:00:00+00:00</td>
    </tr>
    <tr>
      <th>2019-01-01 00:01:00+00:00</th>
      <td>2019-01-01 00:01:00</td>
      <td>-0.1670</td>
      <td>-0.1573</td>
      <td>-0.066069</td>
      <td>146.075737</td>
      <td>20.005652</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>2019-01-01</td>
      <td>00:01:00</td>
      <td>1.546301e+09</td>
      <td>2019-01-01 00:01:00+00:00</td>
    </tr>
    <tr>
      <th>2019-01-01 00:02:00+00:00</th>
      <td>2019-01-01 00:02:00</td>
      <td>-0.1407</td>
      <td>-0.1552</td>
      <td>-0.041295</td>
      <td>146.027152</td>
      <td>20.408170</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>2019-01-01</td>
      <td>00:02:00</td>
      <td>1.546301e+09</td>
      <td>2019-01-01 00:02:00+00:00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We have seen how the same DataFrame with <em>datetimeindex</em> can be obtained regardless of the format of time-related data.</p>
</div>
</div>
<div class="section" id="down-and-up-sampling-time-series-data-a-id-timeseries-downup-sampling-a">
<h2>Down and up-sampling time-series data<a id='timeseries_downup_sampling'></a><a class="headerlink" href="#down-and-up-sampling-time-series-data-a-id-timeseries-downup-sampling-a" title="Permalink to this headline">¶</a></h2>
<p>When assessing solar resource, you may need a different time-resolution than your data for a particular part of the analysis. In those cases, it is possible to <strong>down-sample and up-sample the data at different temporal resolutions</strong> using two different methods within <a class="reference external" href="https://pandas.pydata.org/">pandas library</a> called <em>resample</em> and <em>asfreq</em>. Depending on your needs, you will opt for one or the other. Regardless of the method, both of them require a DataFrame with <em>datetimeindex</em> either time-aware (localized) or time-naive (not localized).</p>
<div class="section" id="asfreq-vs-resample">
<h3>asfreq vs. resample<a class="headerlink" href="#asfreq-vs-resample" title="Permalink to this headline">¶</a></h3>
<p>Let’s first create a new DataFrame with only the columns with solar data and see the differences between both methods with examples.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># New DataFrame with 1-minute data and solar data</span>
<span class="n">df_1min</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;GHI&#39;</span><span class="p">,</span> <span class="s1">&#39;DHI&#39;</span><span class="p">,</span> <span class="s1">&#39;DNI&#39;</span><span class="p">,</span> <span class="s1">&#39;zenith&#39;</span><span class="p">,</span> <span class="s1">&#39;azimuth&#39;</span><span class="p">]]</span>
<span class="c1"># See our new DataFrame</span>
<span class="n">df_1min</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00+00:00</th>
      <td>-0.1625</td>
      <td>-0.1552</td>
      <td>-0.084945</td>
      <td>146.123393</td>
      <td>19.602275</td>
    </tr>
    <tr>
      <th>2019-01-01 00:01:00+00:00</th>
      <td>-0.1670</td>
      <td>-0.1573</td>
      <td>-0.066069</td>
      <td>146.075737</td>
      <td>20.005652</td>
    </tr>
    <tr>
      <th>2019-01-01 00:02:00+00:00</th>
      <td>-0.1407</td>
      <td>-0.1552</td>
      <td>-0.041295</td>
      <td>146.027152</td>
      <td>20.408170</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Let’s try to obtain a DataFrame down-sampled with the maximum monthly data with both methods and see the differences. With <em>asfreq</em>, it would be the following:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_1min</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s2">&quot;1M&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>GHI         -0.440500
DHI         -0.469900
DNI         -0.069626
zenith     146.185818
azimuth     24.835908
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>With <em>resample</em> the result would be:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_1min</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;1M&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-31 00:00:00+00:00</th>
      <td>338.9</td>
      <td>182.7</td>
      <td>763.464785</td>
      <td>147.169949</td>
      <td>359.989371</td>
    </tr>
    <tr>
      <th>2019-02-28 00:00:00+00:00</th>
      <td>522.6</td>
      <td>289.9</td>
      <td>919.885601</td>
      <td>141.175460</td>
      <td>359.996839</td>
    </tr>
    <tr>
      <th>2019-03-31 00:00:00+00:00</th>
      <td>870.1</td>
      <td>431.7</td>
      <td>956.962071</td>
      <td>131.620512</td>
      <td>359.995280</td>
    </tr>
    <tr>
      <th>2019-04-30 00:00:00+00:00</th>
      <td>947.0</td>
      <td>548.9</td>
      <td>970.017244</td>
      <td>119.494248</td>
      <td>359.995886</td>
    </tr>
    <tr>
      <th>2019-05-31 00:00:00+00:00</th>
      <td>1252.0</td>
      <td>615.7</td>
      <td>965.025517</td>
      <td>108.998249</td>
      <td>359.979052</td>
    </tr>
    <tr>
      <th>2019-06-30 00:00:00+00:00</th>
      <td>1182.0</td>
      <td>718.8</td>
      <td>976.653823</td>
      <td>102.098973</td>
      <td>359.995393</td>
    </tr>
    <tr>
      <th>2019-07-31 00:00:00+00:00</th>
      <td>1231.0</td>
      <td>680.0</td>
      <td>942.186192</td>
      <td>106.065658</td>
      <td>359.997260</td>
    </tr>
    <tr>
      <th>2019-08-31 00:00:00+00:00</th>
      <td>1065.0</td>
      <td>594.7</td>
      <td>881.343692</td>
      <td>115.737432</td>
      <td>359.981766</td>
    </tr>
    <tr>
      <th>2019-09-30 00:00:00+00:00</th>
      <td>920.3</td>
      <td>515.1</td>
      <td>874.800000</td>
      <td>127.181382</td>
      <td>359.992309</td>
    </tr>
    <tr>
      <th>2019-10-31 00:00:00+00:00</th>
      <td>779.3</td>
      <td>490.1</td>
      <td>879.402056</td>
      <td>138.454695</td>
      <td>359.982646</td>
    </tr>
    <tr>
      <th>2019-11-30 00:00:00+00:00</th>
      <td>399.8</td>
      <td>254.6</td>
      <td>713.802578</td>
      <td>145.919278</td>
      <td>359.984077</td>
    </tr>
    <tr>
      <th>2019-12-31 00:00:00+00:00</th>
      <td>281.3</td>
      <td>185.5</td>
      <td>665.651936</td>
      <td>147.646454</td>
      <td>359.997765</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>It is obvious that the outputs are not the same and that is because the methods work differently. <em>asfreq</em> takes the value at the simultaneous stamps given by the frequency argument. See below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_1min</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s2">&quot;1M&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-31 00:00:00+00:00</th>
      <td>-1.9120</td>
      <td>-1.8110</td>
      <td>-0.399943</td>
      <td>141.098882</td>
      <td>14.045889</td>
    </tr>
    <tr>
      <th>2019-02-28 00:00:00+00:00</th>
      <td>-2.0780</td>
      <td>-2.1730</td>
      <td>-0.581624</td>
      <td>131.796554</td>
      <td>12.470592</td>
    </tr>
    <tr>
      <th>2019-03-31 00:00:00+00:00</th>
      <td>-2.4270</td>
      <td>-2.4730</td>
      <td>-0.542702</td>
      <td>119.520887</td>
      <td>13.124435</td>
    </tr>
    <tr>
      <th>2019-04-30 00:00:00+00:00</th>
      <td>-2.6120</td>
      <td>-2.4680</td>
      <td>-0.507272</td>
      <td>108.725725</td>
      <td>13.483728</td>
    </tr>
    <tr>
      <th>2019-05-31 00:00:00+00:00</th>
      <td>-0.4405</td>
      <td>-0.4976</td>
      <td>-0.224355</td>
      <td>101.573386</td>
      <td>12.427350</td>
    </tr>
    <tr>
      <th>2019-06-30 00:00:00+00:00</th>
      <td>-3.1180</td>
      <td>-3.0190</td>
      <td>-0.956809</td>
      <td>100.394868</td>
      <td>10.868619</td>
    </tr>
    <tr>
      <th>2019-07-31 00:00:00+00:00</th>
      <td>-0.4805</td>
      <td>-0.4752</td>
      <td>-0.081511</td>
      <td>105.252590</td>
      <td>10.733647</td>
    </tr>
    <tr>
      <th>2019-08-31 00:00:00+00:00</th>
      <td>-1.7540</td>
      <td>-1.6530</td>
      <td>-0.419352</td>
      <td>114.572259</td>
      <td>13.478235</td>
    </tr>
    <tr>
      <th>2019-09-30 00:00:00+00:00</th>
      <td>-0.4725</td>
      <td>-0.4699</td>
      <td>-0.069626</td>
      <td>125.457165</td>
      <td>18.467583</td>
    </tr>
    <tr>
      <th>2019-10-31 00:00:00+00:00</th>
      <td>-1.7210</td>
      <td>-1.7300</td>
      <td>-0.556769</td>
      <td>136.224252</td>
      <td>23.651597</td>
    </tr>
    <tr>
      <th>2019-11-30 00:00:00+00:00</th>
      <td>-3.0250</td>
      <td>-2.8840</td>
      <td>-0.816359</td>
      <td>143.887359</td>
      <td>24.835908</td>
    </tr>
    <tr>
      <th>2019-12-31 00:00:00+00:00</th>
      <td>-0.5492</td>
      <td>-0.5901</td>
      <td>-0.195842</td>
      <td>146.185818</td>
      <td>19.876371</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Then <em>.max()</em> has returned the maximum of each of the columns.</p>
<p>In contrast, <em>resample</em> does return the maximum value within the period of time at the specified frequency. <em>resample</em> method requires a mathematical operation to perform in the resampled data (the maximum value in our case). Otherwise, it would return a <em>DatetimeIndexResampler</em> object without showing any data. See below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_1min</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s2">&quot;1M&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;pandas.core.resample.DatetimeIndexResampler object at 0x000001EC063C8400&gt;
</pre></div>
</div>
</div>
</div>
<p>The <em>resample</em> method accepts multiple <strong>mathematical and statistical operations</strong>. For example: maximum (max), minimum (min), arithmetic mean (mean), standard deviation (std), median (median), mode (mode), addition (sum), among others.</p>
<p>Both methods allow for multiple <strong>frequencies options</strong>, the available frequency tags within Python can be found <a class="reference external" href="https://stackoverflow.com/questions/35339139/where-is-the-documentation-on-pandas-freq-tags">here</a>.</p>
</div>
<div class="section" id="down-sampling-the-data-in-a-time-series">
<h3>Down-sampling the data in a time-series<a class="headerlink" href="#down-sampling-the-data-in-a-time-series" title="Permalink to this headline">¶</a></h3>
<p>Down-sampling permits turning more frequent values into less frequent. In the context of solar resource and considering our 1-minute resolution dataset, down-sampling can be used for:</p>
<ul class="simple">
<li><p>Producing a timeseries of hourly/daily average irradiance.</p></li>
<li><p>Producing a timeseries of maximum daily irradiance.</p></li>
<li><p>Estimating the hourly/daily/monthly sums of irradiation.</p></li>
<li><p>And many more!</p></li>
</ul>
<p>Let’s implement some of these listed examples!</p>
<div class="section" id="producing-hourly-average-irradiance-from-minutely-observations">
<h4>Producing hourly average irradiance from minutely observations<a class="headerlink" href="#producing-hourly-average-irradiance-from-minutely-observations" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Resampling to hourly mean values</span>
<span class="n">df_hourly</span> <span class="o">=</span> <span class="n">df_1min</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;1h&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="c1"># Showing the shape of the new DataFrame</span>
<span class="n">df_hourly</span><span class="o">.</span><span class="n">shape</span> <span class="c1"># returns Rows, Columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(8760, 5)
</pre></div>
</div>
</div>
</div>
<p>There are 8760 hours in a year. Yet, we can have a look to the first few rows of the DataFrame:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_hourly</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00+00:00</th>
      <td>-0.542970</td>
      <td>-0.484915</td>
      <td>0.163846</td>
      <td>144.227671</td>
      <td>30.934465</td>
    </tr>
    <tr>
      <th>2019-01-01 01:00:00+00:00</th>
      <td>-0.458910</td>
      <td>-0.399235</td>
      <td>0.151592</td>
      <td>138.699745</td>
      <td>51.345459</td>
    </tr>
    <tr>
      <th>2019-01-01 02:00:00+00:00</th>
      <td>-0.306264</td>
      <td>-0.259619</td>
      <td>0.212868</td>
      <td>131.449420</td>
      <td>68.070432</td>
    </tr>
    <tr>
      <th>2019-01-01 03:00:00+00:00</th>
      <td>-0.120037</td>
      <td>-0.123399</td>
      <td>0.175096</td>
      <td>123.333622</td>
      <td>82.182450</td>
    </tr>
    <tr>
      <th>2019-01-01 04:00:00+00:00</th>
      <td>-0.253482</td>
      <td>-0.298198</td>
      <td>0.084019</td>
      <td>114.937056</td>
      <td>94.758348</td>
    </tr>
    <tr>
      <th>2019-01-01 05:00:00+00:00</th>
      <td>-0.432298</td>
      <td>-0.614572</td>
      <td>-0.384241</td>
      <td>106.680512</td>
      <td>106.608991</td>
    </tr>
    <tr>
      <th>2019-01-01 06:00:00+00:00</th>
      <td>-1.279617</td>
      <td>-1.407717</td>
      <td>-0.518566</td>
      <td>98.913606</td>
      <td>118.317769</td>
    </tr>
    <tr>
      <th>2019-01-01 07:00:00+00:00</th>
      <td>2.253182</td>
      <td>2.231991</td>
      <td>-0.437360</td>
      <td>91.969431</td>
      <td>130.301879</td>
    </tr>
    <tr>
      <th>2019-01-01 08:00:00+00:00</th>
      <td>37.844500</td>
      <td>31.406833</td>
      <td>77.574601</td>
      <td>86.187804</td>
      <td>142.832799</td>
    </tr>
    <tr>
      <th>2019-01-01 09:00:00+00:00</th>
      <td>89.666833</td>
      <td>64.755833</td>
      <td>190.807081</td>
      <td>81.908299</td>
      <td>156.016661</td>
    </tr>
    <tr>
      <th>2019-01-01 10:00:00+00:00</th>
      <td>123.546333</td>
      <td>83.877500</td>
      <td>225.246207</td>
      <td>79.431147</td>
      <td>169.762411</td>
    </tr>
    <tr>
      <th>2019-01-01 11:00:00+00:00</th>
      <td>143.643333</td>
      <td>72.251333</td>
      <td>386.011989</td>
      <td>78.954734</td>
      <td>183.788453</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>A time-series with the maximum irradiance would be similar replacing <em>‘mean()’</em> with <em>‘max()’</em>.</p>
<div class="section" id="producing-time-series-of-monthly-total-ghi-dhi-dni-irradiation-from-minutely-observations">
<h5>Producing time-series of monthly total GHI, DHI, DNI irradiation from minutely observations<a class="headerlink" href="#producing-time-series-of-monthly-total-ghi-dhi-dni-irradiation-from-minutely-observations" title="Permalink to this headline">¶</a></h5>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Resampling to monthly aggregated values</span>
<span class="n">monthly_energy</span> <span class="o">=</span> <span class="n">df_1min</span><span class="p">[[</span><span class="s1">&#39;GHI&#39;</span><span class="p">,</span> <span class="s1">&#39;DHI&#39;</span><span class="p">,</span> <span class="s1">&#39;DNI&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;1M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">60</span><span class="p">)</span>
<span class="c1"># See the results expressed in kWh·sqm</span>
<span class="n">monthly_energy</span><span class="o">/</span><span class="mi">1000</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-31 00:00:00+00:00</th>
      <td>15.089637</td>
      <td>9.526574</td>
      <td>28.768259</td>
    </tr>
    <tr>
      <th>2019-02-28 00:00:00+00:00</th>
      <td>33.021845</td>
      <td>17.368155</td>
      <td>51.976576</td>
    </tr>
    <tr>
      <th>2019-03-31 00:00:00+00:00</th>
      <td>62.884308</td>
      <td>37.486263</td>
      <td>63.635438</td>
    </tr>
    <tr>
      <th>2019-04-30 00:00:00+00:00</th>
      <td>148.487528</td>
      <td>45.998111</td>
      <td>203.978915</td>
    </tr>
    <tr>
      <th>2019-05-31 00:00:00+00:00</th>
      <td>146.931819</td>
      <td>68.483715</td>
      <td>139.058488</td>
    </tr>
    <tr>
      <th>2019-06-30 00:00:00+00:00</th>
      <td>183.762693</td>
      <td>75.466369</td>
      <td>176.819382</td>
    </tr>
    <tr>
      <th>2019-07-31 00:00:00+00:00</th>
      <td>166.060663</td>
      <td>76.824075</td>
      <td>154.057583</td>
    </tr>
    <tr>
      <th>2019-08-31 00:00:00+00:00</th>
      <td>131.297457</td>
      <td>66.956932</td>
      <td>120.682504</td>
    </tr>
    <tr>
      <th>2019-09-30 00:00:00+00:00</th>
      <td>71.766883</td>
      <td>45.467055</td>
      <td>61.020981</td>
    </tr>
    <tr>
      <th>2019-10-31 00:00:00+00:00</th>
      <td>40.750872</td>
      <td>25.956907</td>
      <td>45.471953</td>
    </tr>
    <tr>
      <th>2019-11-30 00:00:00+00:00</th>
      <td>11.925313</td>
      <td>10.199469</td>
      <td>9.170361</td>
    </tr>
    <tr>
      <th>2019-12-31 00:00:00+00:00</th>
      <td>8.635832</td>
      <td>6.301658</td>
      <td>15.005240</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>It could be done in similar way for other resolutions (e.g. daily or annual irradiation).</p>
</div>
</div>
</div>
<div class="section" id="up-sampling-the-data-in-a-time-series">
<h3>Up-sampling the data in a time-series<a class="headerlink" href="#up-sampling-the-data-in-a-time-series" title="Permalink to this headline">¶</a></h3>
<p>Up-sampling permits obtaining more frequent values from less frequent. For solar data, depending on the application up to sub-minutely data could be required and up-sampling is a technique that provides a manner to increase the temporal resolution to adapt it to our needs. For example, turning an hourly time-series into a half-hourly. Let’s see an example using both <em>resample</em> and <em>asfreq</em>.</p>
<div class="section" id="producing-half-hourly-irradiance-series-from-hourly-observations">
<h4>Producing half-hourly irradiance series from hourly observations<a class="headerlink" href="#producing-half-hourly-irradiance-series-from-hourly-observations" title="Permalink to this headline">¶</a></h4>
<p>Using the DataFrame <em>df_hourly</em> created previously, it can be up-sample as follows:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Using &#39;resample&#39; method:</span>
<span class="n">df_hourly</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;30min&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00+00:00</th>
      <td>-0.542970</td>
      <td>-0.484915</td>
      <td>0.163846</td>
      <td>144.227671</td>
      <td>30.934465</td>
    </tr>
    <tr>
      <th>2019-01-01 00:30:00+00:00</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-01-01 01:00:00+00:00</th>
      <td>-0.458910</td>
      <td>-0.399235</td>
      <td>0.151592</td>
      <td>138.699745</td>
      <td>51.345459</td>
    </tr>
    <tr>
      <th>2019-01-01 01:30:00+00:00</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-01-01 02:00:00+00:00</th>
      <td>-0.306264</td>
      <td>-0.259619</td>
      <td>0.212868</td>
      <td>131.449420</td>
      <td>68.070432</td>
    </tr>
    <tr>
      <th>2019-01-01 02:30:00+00:00</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-01-01 03:00:00+00:00</th>
      <td>-0.120037</td>
      <td>-0.123399</td>
      <td>0.175096</td>
      <td>123.333622</td>
      <td>82.182450</td>
    </tr>
    <tr>
      <th>2019-01-01 03:30:00+00:00</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-01-01 04:00:00+00:00</th>
      <td>-0.253482</td>
      <td>-0.298198</td>
      <td>0.084019</td>
      <td>114.937056</td>
      <td>94.758348</td>
    </tr>
    <tr>
      <th>2019-01-01 04:30:00+00:00</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Using &#39;asfreq&#39; method:</span>
<span class="n">df_hourly</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;30min&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00+00:00</th>
      <td>-0.542970</td>
      <td>-0.484915</td>
      <td>0.163846</td>
      <td>144.227671</td>
      <td>30.934465</td>
    </tr>
    <tr>
      <th>2019-01-01 00:30:00+00:00</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-01-01 01:00:00+00:00</th>
      <td>-0.458910</td>
      <td>-0.399235</td>
      <td>0.151592</td>
      <td>138.699745</td>
      <td>51.345459</td>
    </tr>
    <tr>
      <th>2019-01-01 01:30:00+00:00</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-01-01 02:00:00+00:00</th>
      <td>-0.306264</td>
      <td>-0.259619</td>
      <td>0.212868</td>
      <td>131.449420</td>
      <td>68.070432</td>
    </tr>
    <tr>
      <th>2019-01-01 02:30:00+00:00</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-01-01 03:00:00+00:00</th>
      <td>-0.120037</td>
      <td>-0.123399</td>
      <td>0.175096</td>
      <td>123.333622</td>
      <td>82.182450</td>
    </tr>
    <tr>
      <th>2019-01-01 03:30:00+00:00</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2019-01-01 04:00:00+00:00</th>
      <td>-0.253482</td>
      <td>-0.298198</td>
      <td>0.084019</td>
      <td>114.937056</td>
      <td>94.758348</td>
    </tr>
    <tr>
      <th>2019-01-01 04:30:00+00:00</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Contrary to the case of down-sampling, both <em>asfreq</em> and <em>resample</em> provide similar results when up-sampling. However, <em>asfreq</em> provides additional functionalities to treat the new timestamps without data, i.e. NaN values.</p>
<p>By passing the argument <em>‘method’</em> with the string <em>‘backfill’</em> or <em>‘bfill’</em> uses the next valid observation to fill the NaN value (back filling). If instead, the string <em>‘pad’</em> or <em>‘ffill’</em> is given, the method assigns the last valid observation forward to the next valid (forward filling).</p>
<p>Let’s see the same example adding this argument:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Half-hourly up-sample with back filling function</span>
<span class="n">df_hourly</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;30min&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;bfill&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00+00:00</th>
      <td>-0.542970</td>
      <td>-0.484915</td>
      <td>0.163846</td>
      <td>144.227671</td>
      <td>30.934465</td>
    </tr>
    <tr>
      <th>2019-01-01 00:30:00+00:00</th>
      <td>-0.458910</td>
      <td>-0.399235</td>
      <td>0.151592</td>
      <td>138.699745</td>
      <td>51.345459</td>
    </tr>
    <tr>
      <th>2019-01-01 01:00:00+00:00</th>
      <td>-0.458910</td>
      <td>-0.399235</td>
      <td>0.151592</td>
      <td>138.699745</td>
      <td>51.345459</td>
    </tr>
    <tr>
      <th>2019-01-01 01:30:00+00:00</th>
      <td>-0.306264</td>
      <td>-0.259619</td>
      <td>0.212868</td>
      <td>131.449420</td>
      <td>68.070432</td>
    </tr>
    <tr>
      <th>2019-01-01 02:00:00+00:00</th>
      <td>-0.306264</td>
      <td>-0.259619</td>
      <td>0.212868</td>
      <td>131.449420</td>
      <td>68.070432</td>
    </tr>
    <tr>
      <th>2019-01-01 02:30:00+00:00</th>
      <td>-0.120037</td>
      <td>-0.123399</td>
      <td>0.175096</td>
      <td>123.333622</td>
      <td>82.182450</td>
    </tr>
    <tr>
      <th>2019-01-01 03:00:00+00:00</th>
      <td>-0.120037</td>
      <td>-0.123399</td>
      <td>0.175096</td>
      <td>123.333622</td>
      <td>82.182450</td>
    </tr>
    <tr>
      <th>2019-01-01 03:30:00+00:00</th>
      <td>-0.253482</td>
      <td>-0.298198</td>
      <td>0.084019</td>
      <td>114.937056</td>
      <td>94.758348</td>
    </tr>
    <tr>
      <th>2019-01-01 04:00:00+00:00</th>
      <td>-0.253482</td>
      <td>-0.298198</td>
      <td>0.084019</td>
      <td>114.937056</td>
      <td>94.758348</td>
    </tr>
    <tr>
      <th>2019-01-01 04:30:00+00:00</th>
      <td>-0.432298</td>
      <td>-0.614572</td>
      <td>-0.384241</td>
      <td>106.680512</td>
      <td>106.608991</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We see that the DataFrame now contains the next valid hourly value in the newly obtained half-hourly timestamps of the previous hour. It would take the previous valid hourly value if we used forward filling. For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Half-hourly up-sample with forward-filling function</span>
<span class="n">df_hourly</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;30min&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;ffill&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00+00:00</th>
      <td>-0.542970</td>
      <td>-0.484915</td>
      <td>0.163846</td>
      <td>144.227671</td>
      <td>30.934465</td>
    </tr>
    <tr>
      <th>2019-01-01 00:30:00+00:00</th>
      <td>-0.542970</td>
      <td>-0.484915</td>
      <td>0.163846</td>
      <td>144.227671</td>
      <td>30.934465</td>
    </tr>
    <tr>
      <th>2019-01-01 01:00:00+00:00</th>
      <td>-0.458910</td>
      <td>-0.399235</td>
      <td>0.151592</td>
      <td>138.699745</td>
      <td>51.345459</td>
    </tr>
    <tr>
      <th>2019-01-01 01:30:00+00:00</th>
      <td>-0.458910</td>
      <td>-0.399235</td>
      <td>0.151592</td>
      <td>138.699745</td>
      <td>51.345459</td>
    </tr>
    <tr>
      <th>2019-01-01 02:00:00+00:00</th>
      <td>-0.306264</td>
      <td>-0.259619</td>
      <td>0.212868</td>
      <td>131.449420</td>
      <td>68.070432</td>
    </tr>
    <tr>
      <th>2019-01-01 02:30:00+00:00</th>
      <td>-0.306264</td>
      <td>-0.259619</td>
      <td>0.212868</td>
      <td>131.449420</td>
      <td>68.070432</td>
    </tr>
    <tr>
      <th>2019-01-01 03:00:00+00:00</th>
      <td>-0.120037</td>
      <td>-0.123399</td>
      <td>0.175096</td>
      <td>123.333622</td>
      <td>82.182450</td>
    </tr>
    <tr>
      <th>2019-01-01 03:30:00+00:00</th>
      <td>-0.120037</td>
      <td>-0.123399</td>
      <td>0.175096</td>
      <td>123.333622</td>
      <td>82.182450</td>
    </tr>
    <tr>
      <th>2019-01-01 04:00:00+00:00</th>
      <td>-0.253482</td>
      <td>-0.298198</td>
      <td>0.084019</td>
      <td>114.937056</td>
      <td>94.758348</td>
    </tr>
    <tr>
      <th>2019-01-01 04:30:00+00:00</th>
      <td>-0.253482</td>
      <td>-0.298198</td>
      <td>0.084019</td>
      <td>114.937056</td>
      <td>94.758348</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The forward filling option provides the same value for o’clock and half past timestamps within the same hour. In addition to these two ways to complete the NaN values, the method <em>asfreq</em> can replace the NaN values with a constant. See below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Half-hourly up-sample filling the new timestamps with a constant</span>
<span class="n">df_hourly</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;30min&#39;</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00+00:00</th>
      <td>-0.542970</td>
      <td>-0.484915</td>
      <td>0.163846</td>
      <td>144.227671</td>
      <td>30.934465</td>
    </tr>
    <tr>
      <th>2019-01-01 00:30:00+00:00</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>2019-01-01 01:00:00+00:00</th>
      <td>-0.458910</td>
      <td>-0.399235</td>
      <td>0.151592</td>
      <td>138.699745</td>
      <td>51.345459</td>
    </tr>
    <tr>
      <th>2019-01-01 01:30:00+00:00</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>2019-01-01 02:00:00+00:00</th>
      <td>-0.306264</td>
      <td>-0.259619</td>
      <td>0.212868</td>
      <td>131.449420</td>
      <td>68.070432</td>
    </tr>
    <tr>
      <th>2019-01-01 02:30:00+00:00</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>2019-01-01 03:00:00+00:00</th>
      <td>-0.120037</td>
      <td>-0.123399</td>
      <td>0.175096</td>
      <td>123.333622</td>
      <td>82.182450</td>
    </tr>
    <tr>
      <th>2019-01-01 03:30:00+00:00</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>2019-01-01 04:00:00+00:00</th>
      <td>-0.253482</td>
      <td>-0.298198</td>
      <td>0.084019</td>
      <td>114.937056</td>
      <td>94.758348</td>
    </tr>
    <tr>
      <th>2019-01-01 04:30:00+00:00</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The use of the methods <em>asfreq</em> or <em>resample</em> will depend on your dataset and the analysis you aim to undertake.</p>
</div>
</div>
</div>
<div class="section" id="interpolating-time-series-data-a-id-timeseries-interpolation-a">
<h2>Interpolating time-series data<a id='timeseries_interpolation'></a><a class="headerlink" href="#interpolating-time-series-data-a-id-timeseries-interpolation-a" title="Permalink to this headline">¶</a></h2>
<p>When up-sampling the data series, it can happen that back-filling, forward-filling and constant replacement does not necessarily work for your analysis/application. An alternative approach is interpolating the replacing the NaN values with an interpolated result. Interpolation in Pandas DataFrames with <em>DatetimeIndex</em> is done with the <em>interpolate</em> method.</p>
<p>The mathematical interpolation method in <em>interpolate</em> is defined with the argument called <em>‘method’</em>. Pandas permits several interpolation methods, such as ‘linear’, ‘cubic’, ‘quadratic’, ‘spline’, ‘polynomial’ and others. All the interpolation options can be found in the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.interpolate.html">documentation</a> of the <em>interpolate</em> method.</p>
<p>Following the previous example, let’s implement interpolation in the missing values of the half-hourly timestamps using ‘linear’, ‘cubic’ and ‘polynomial’ methods:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Up-sample using the &#39;asfreq&#39; method</span>
<span class="n">df_30min</span> <span class="o">=</span> <span class="n">df_hourly</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;30min&#39;</span><span class="p">)</span>
<span class="c1"># Interpolate missing values (NaN) with linear interpolation</span>
<span class="n">df_linear</span> <span class="o">=</span> <span class="n">df_30min</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
<span class="c1"># See the results:</span>
<span class="n">df_linear</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00+00:00</th>
      <td>-0.542970</td>
      <td>-0.484915</td>
      <td>0.163846</td>
      <td>144.227671</td>
      <td>30.934465</td>
    </tr>
    <tr>
      <th>2019-01-01 00:30:00+00:00</th>
      <td>-0.500940</td>
      <td>-0.442075</td>
      <td>0.157719</td>
      <td>141.463708</td>
      <td>41.139962</td>
    </tr>
    <tr>
      <th>2019-01-01 01:00:00+00:00</th>
      <td>-0.458910</td>
      <td>-0.399235</td>
      <td>0.151592</td>
      <td>138.699745</td>
      <td>51.345459</td>
    </tr>
    <tr>
      <th>2019-01-01 01:30:00+00:00</th>
      <td>-0.382587</td>
      <td>-0.329427</td>
      <td>0.182230</td>
      <td>135.074583</td>
      <td>59.707946</td>
    </tr>
    <tr>
      <th>2019-01-01 02:00:00+00:00</th>
      <td>-0.306264</td>
      <td>-0.259619</td>
      <td>0.212868</td>
      <td>131.449420</td>
      <td>68.070432</td>
    </tr>
    <tr>
      <th>2019-01-01 02:30:00+00:00</th>
      <td>-0.213151</td>
      <td>-0.191509</td>
      <td>0.193982</td>
      <td>127.391521</td>
      <td>75.126441</td>
    </tr>
    <tr>
      <th>2019-01-01 03:00:00+00:00</th>
      <td>-0.120037</td>
      <td>-0.123399</td>
      <td>0.175096</td>
      <td>123.333622</td>
      <td>82.182450</td>
    </tr>
    <tr>
      <th>2019-01-01 03:30:00+00:00</th>
      <td>-0.186760</td>
      <td>-0.210799</td>
      <td>0.129557</td>
      <td>119.135339</td>
      <td>88.470399</td>
    </tr>
    <tr>
      <th>2019-01-01 04:00:00+00:00</th>
      <td>-0.253482</td>
      <td>-0.298198</td>
      <td>0.084019</td>
      <td>114.937056</td>
      <td>94.758348</td>
    </tr>
    <tr>
      <th>2019-01-01 04:30:00+00:00</th>
      <td>-0.342890</td>
      <td>-0.456385</td>
      <td>-0.150111</td>
      <td>110.808784</td>
      <td>100.683670</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Similarly, it can be implemented to other methods:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Interpolate missing values (NaN) with cubic interpolation</span>
<span class="n">df_cubic</span> <span class="o">=</span> <span class="n">df_30min</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;cubic&#39;</span><span class="p">)</span>
<span class="c1"># See the results:</span>
<span class="n">df_cubic</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00+00:00</th>
      <td>-0.542970</td>
      <td>-0.484915</td>
      <td>0.163846</td>
      <td>144.227671</td>
      <td>30.934465</td>
    </tr>
    <tr>
      <th>2019-01-01 00:30:00+00:00</th>
      <td>-0.503395</td>
      <td>-0.446198</td>
      <td>0.122787</td>
      <td>141.736469</td>
      <td>41.666754</td>
    </tr>
    <tr>
      <th>2019-01-01 01:00:00+00:00</th>
      <td>-0.458910</td>
      <td>-0.399235</td>
      <td>0.151592</td>
      <td>138.699745</td>
      <td>51.345459</td>
    </tr>
    <tr>
      <th>2019-01-01 01:30:00+00:00</th>
      <td>-0.397278</td>
      <td>-0.338788</td>
      <td>0.198779</td>
      <td>135.232422</td>
      <td>60.102659</td>
    </tr>
    <tr>
      <th>2019-01-01 02:00:00+00:00</th>
      <td>-0.306264</td>
      <td>-0.259619</td>
      <td>0.212868</td>
      <td>131.449420</td>
      <td>68.070432</td>
    </tr>
    <tr>
      <th>2019-01-01 02:30:00+00:00</th>
      <td>-0.190244</td>
      <td>-0.168894</td>
      <td>0.172286</td>
      <td>127.457857</td>
      <td>75.382913</td>
    </tr>
    <tr>
      <th>2019-01-01 03:00:00+00:00</th>
      <td>-0.120037</td>
      <td>-0.123399</td>
      <td>0.175096</td>
      <td>123.333622</td>
      <td>82.182450</td>
    </tr>
    <tr>
      <th>2019-01-01 03:30:00+00:00</th>
      <td>-0.156413</td>
      <td>-0.173991</td>
      <td>0.256926</td>
      <td>119.141998</td>
      <td>88.605702</td>
    </tr>
    <tr>
      <th>2019-01-01 04:00:00+00:00</th>
      <td>-0.253482</td>
      <td>-0.298198</td>
      <td>0.084019</td>
      <td>114.937056</td>
      <td>94.758348</td>
    </tr>
    <tr>
      <th>2019-01-01 04:30:00+00:00</th>
      <td>-0.350292</td>
      <td>-0.456507</td>
      <td>-0.476455</td>
      <td>110.768591</td>
      <td>100.734004</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>With polynomial interpolation, the degree or order of the polynomial function needs to be defined as an argument:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Interpolate missing values (NaN) with polynomial interpolation</span>
<span class="n">df_polynomial</span> <span class="o">=</span> <span class="n">df_30min</span><span class="o">.</span><span class="n">interpolate</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;polynomial&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># See the results:</span>
<span class="n">df_polynomial</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>GHI</th>
      <th>DHI</th>
      <th>DNI</th>
      <th>zenith</th>
      <th>azimuth</th>
    </tr>
    <tr>
      <th>datetime</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2019-01-01 00:00:00+00:00</th>
      <td>-0.542970</td>
      <td>-0.484915</td>
      <td>0.163846</td>
      <td>144.227671</td>
      <td>30.934465</td>
    </tr>
    <tr>
      <th>2019-01-01 00:30:00+00:00</th>
      <td>-0.513094</td>
      <td>-0.514441</td>
      <td>-0.190990</td>
      <td>141.746203</td>
      <td>41.656512</td>
    </tr>
    <tr>
      <th>2019-01-01 01:00:00+00:00</th>
      <td>-0.458910</td>
      <td>-0.399235</td>
      <td>0.151592</td>
      <td>138.699745</td>
      <td>51.345459</td>
    </tr>
    <tr>
      <th>2019-01-01 01:30:00+00:00</th>
      <td>-0.390969</td>
      <td>-0.308684</td>
      <td>0.322931</td>
      <td>135.228658</td>
      <td>60.106450</td>
    </tr>
    <tr>
      <th>2019-01-01 02:00:00+00:00</th>
      <td>-0.306264</td>
      <td>-0.259619</td>
      <td>0.212868</td>
      <td>131.449420</td>
      <td>68.070432</td>
    </tr>
    <tr>
      <th>2019-01-01 02:30:00+00:00</th>
      <td>-0.207114</td>
      <td>-0.205133</td>
      <td>0.082194</td>
      <td>127.458068</td>
      <td>75.381202</td>
    </tr>
    <tr>
      <th>2019-01-01 03:00:00+00:00</th>
      <td>-0.120037</td>
      <td>-0.123399</td>
      <td>0.175096</td>
      <td>123.333622</td>
      <td>82.182450</td>
    </tr>
    <tr>
      <th>2019-01-01 03:30:00+00:00</th>
      <td>-0.112484</td>
      <td>-0.101774</td>
      <td>0.346728</td>
      <td>119.141530</td>
      <td>88.604983</td>
    </tr>
    <tr>
      <th>2019-01-01 04:00:00+00:00</th>
      <td>-0.253482</td>
      <td>-0.298198</td>
      <td>0.084019</td>
      <td>114.937056</td>
      <td>94.758348</td>
    </tr>
    <tr>
      <th>2019-01-01 04:30:00+00:00</th>
      <td>-0.441743</td>
      <td>-0.607006</td>
      <td>-0.514464</td>
      <td>110.768589</td>
      <td>100.733618</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The interpolation of NaN values when up-sampling time-series data can help overcome the issues of using back or forward filling, specially if you aim to up-sample at higher frequencies than the example shown (e.g. 1-hour to 15-minute resolution series). The mathematical methods available for interpolation within Pandas are diverse and cover beyond the most common interpolation functions.</p>
</div>
<div class="section" id="visualizing-time-series-data-a-id-timeseries-visualization-a">
<h2>Visualizing time-series data<a id='timeseries_visualization'></a><a class="headerlink" href="#visualizing-time-series-data-a-id-timeseries-visualization-a" title="Permalink to this headline">¶</a></h2>
<p>It is often useful to visualize the data to grasp insighs and observe trends about the data. This section shows few examples to visualize time-series data.</p>
<p><strong>Plotting a time-series for a day of interest:</strong></p>
<p>Below there is an example to visualize a single day of interest. With DataFrames using <em>DatetimeIndex</em> it is easy to select a particular day and Pandas interacts with Matplotlib.Pyplot library to plot straight-away.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plotting GHI for a given day in the time-series</span>
<span class="n">df_1min</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2019-06-01&#39;</span><span class="p">,</span> <span class="s1">&#39;GHI&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;GHI&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Irradiance [W/m$^2$]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;UTC Time [HH:MM]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  <span class="c1"># Not necsessary in Jupyter Notebooks but usually required in other IDEs.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/manipulating_time_series_55_0.png" src="../_images/manipulating_time_series_55_0.png" />
</div>
</div>
<p>We can visualize the effect of using average (<em>resample</em>) vs. instantaneous (<em>asfreq</em>) measurements when down-sampling our data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plotting GHI for a given day in the time-series</span>
<span class="n">df_1min</span><span class="p">[</span><span class="s1">&#39;2019-06-01&#39;</span><span class="p">][</span><span class="s1">&#39;GHI&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;1-min data&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span> <span class="c1"># Reference data</span>
<span class="n">df_1min</span><span class="o">.</span><span class="n">asfreq</span><span class="p">(</span><span class="s1">&#39;30min&#39;</span><span class="p">)[</span><span class="s1">&#39;2019-06-01&#39;</span><span class="p">][</span><span class="s1">&#39;GHI&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;30-min instant.&#39;</span><span class="p">)</span> <span class="c1"># Instantaneous 30-min values</span>
<span class="n">df_1min</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;30Min&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="s1">&#39;2019-06-01&#39;</span><span class="p">][</span><span class="s1">&#39;GHI&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;30-min average&#39;</span><span class="p">)</span> <span class="c1"># Average 30-min values</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Average vs. Actual GHI Measurements&#39;</span><span class="p">)</span> <span class="c1"># title of the figure</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Irradiance [W/m$^2$]&#39;</span><span class="p">)</span> <span class="c1"># y-axis label</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;UTC Time [HH:MM]&#39;</span><span class="p">)</span> <span class="c1"># x-axis label</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span> <span class="c1"># insert legend</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span> <span class="c1"># Not needed in Jupyter Notebooks but usually required in other IDEs.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/manipulating_time_series_57_0.png" src="../_images/manipulating_time_series_57_0.png" />
</div>
</div>
<p><strong>Plotting a time-series for a few consecutive days of interest</strong></p>
<p>Below there is an example to visualize a few consecutive days (e.g. 5 days) of interest. By using [‘start date’]:[‘end date’] it is possible to select time ranges easily with a DataFrame having a <em>DatetimeIndex</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Variables to plot</span>
<span class="nb">vars</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;GHI&#39;</span><span class="p">,</span> <span class="s1">&#39;DNI&#39;</span><span class="p">,</span> <span class="s1">&#39;DHI&#39;</span><span class="p">]</span> 
<span class="c1"># Create 3 subplots, with shared X and Y axis</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="c1"># Add title to the plot</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Average Hourly Solar Radiation Observations&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_1min</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;1H&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="s1">&#39;2019-06-01&#39;</span><span class="p">:</span><span class="s1">&#39;2019-06-05&#39;</span><span class="p">][</span><span class="nb">vars</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Average&#39;</span><span class="p">)</span> <span class="c1"># Average hourly</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_1min</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;1H&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()[</span><span class="s1">&#39;2019-06-01&#39;</span><span class="p">:</span><span class="s1">&#39;2019-06-05&#39;</span><span class="p">][</span><span class="nb">vars</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Maximum&#39;</span><span class="p">)</span> <span class="c1"># Max. hourly</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_1min</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;1H&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">min</span><span class="p">()[</span><span class="s1">&#39;2019-06-01&#39;</span><span class="p">:</span><span class="s1">&#39;2019-06-05&#39;</span><span class="p">][</span><span class="nb">vars</span><span class="p">[</span><span class="n">i</span><span class="p">]],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Minimum&#39;</span><span class="p">)</span> <span class="c1"># Min. hourly</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="nb">vars</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="c1"># Title for each subplot</span>
<span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">hspace</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span> <span class="c1"># Adjust the white space between the subplots titles</span>
<span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.04</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s1">&#39;Irradiance [W/m$^2$]&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span> <span class="c1"># Common Y Axis</span>
<span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.51</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">,</span> <span class="s1">&#39;UTC Time&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span> <span class="c1"># Common X Axis</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper right&#39;</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># Legend for the last subplot or &#39;axs[i].legend()&#39; in the loop to a legend to each.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/manipulating_time_series_59_0.png" src="../_images/manipulating_time_series_59_0.png" />
</div>
</div>
<p><strong>Plotting a time-series for a few non-consecutive days of interest</strong></p>
<p>Below there is an example to visualize a few non-consecutive days of interest, which could be the case when we would like to observe several days scattered throughout the year a single plot. In order to do this, we need to select the day of interest from the DataFrame and then reset its <em>DatetimeIndex</em>. For example:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># List of days of interest</span>
<span class="n">days</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;2019-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-03-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-06-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2019-09-01&#39;</span><span class="p">]</span>
<span class="c1"># Iterate over the days and plot each of them</span>
<span class="k">for</span> <span class="n">day</span> <span class="ow">in</span> <span class="n">days</span><span class="p">:</span> 
    <span class="n">df_day</span> <span class="o">=</span> <span class="n">df_1min</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;1h&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="n">day</span><span class="p">][</span><span class="s1">&#39;GHI&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>  <span class="c1"># average hourly of GHI for current day</span>
    <span class="n">df_day</span> <span class="o">=</span> <span class="n">df_day</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># reset its Index to numeric (i.e. 0,1,2,3...)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">df_day</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">day</span><span class="p">)</span> <span class="c1"># plot the current day</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Average Hourly GHI Measurements for Days of Interest&#39;</span><span class="p">)</span> <span class="c1"># title of the figure</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span> <span class="c1"># set labels positions and names</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Irradiance [W/m$^2$]&#39;</span><span class="p">)</span> <span class="c1"># y-axis label</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;UTC Time&#39;</span><span class="p">)</span> <span class="c1"># x-axis label</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span> <span class="c1"># insert legend</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/manipulating_time_series_61_0.png" src="../_images/manipulating_time_series_61_0.png" />
</div>
</div>
<p><strong>Daily insolation throughout the year</strong></p>
<p>With time-series data, the hourly/daily/monthly insolation (i.e. the sum of accumulated energy) can also be analysed throughout the year with time-series data. For example, below an example to visualize the daily insolation is shown:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calculate the daily insolation expressed in kWh·sqm from GHI measurements</span>
<span class="n">daily_energy</span> <span class="o">=</span> <span class="p">(</span><span class="n">df_1min</span><span class="p">[</span><span class="s1">&#39;GHI&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;1D&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">60</span><span class="p">))</span><span class="o">/</span><span class="mi">1000</span> <span class="c1"># selecting only GHI returns a Pandas Series</span>

<span class="c1"># Create time-series plot</span>
<span class="n">daily_energy</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="n">legend</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1"># plot timeseries </span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Time-series of Daily Insolation&#39;</span><span class="p">)</span>  <span class="c1"># add title</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Energy [kWh/m$^2$]&#39;</span><span class="p">)</span> <span class="c1"># add Y-axis label</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time&#39;</span><span class="p">)</span> <span class="c1"># add X-axis label</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/manipulating_time_series_63_0.png" src="../_images/manipulating_time_series_63_0.png" />
</div>
</div>
<p>Time-series data can also be visualized in other ways, for instance, as a heat map.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Prepare the data for heat map of hourly insolation</span>
<span class="n">energy_array</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span> <span class="c1"># empty DataFrame for the results</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">13</span><span class="p">):</span> <span class="c1"># iterate over months</span>
    <span class="c1"># select the data in the month and eliminate the datetimeindex</span>
    <span class="n">df_month</span> <span class="o">=</span> <span class="n">daily_energy</span><span class="p">[</span><span class="n">daily_energy</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">month</span><span class="o">==</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> 
    <span class="c1"># rename the column with the number of the month</span>
    <span class="n">df_month</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span>
    <span class="c1"># Append results to the DataFrame</span>
    <span class="n">energy_array</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">energy_array</span><span class="p">,</span> <span class="n">df_month</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># Transpose to have months in y-axis and days in x-axis</span>
<span class="n">energy_array</span> <span class="o">=</span> <span class="n">energy_array</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="c1"># Rename the columns of the days </span>
<span class="n">energy_array</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>

<span class="c1"># Plot heat map of daily insolation</span>
<span class="n">months</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Jan&#39;</span><span class="p">,</span> <span class="s1">&#39;Feb&#39;</span><span class="p">,</span> <span class="s1">&#39;Mar&#39;</span><span class="p">,</span> <span class="s1">&#39;Apr&#39;</span><span class="p">,</span> <span class="s1">&#39;May&#39;</span><span class="p">,</span> <span class="s1">&#39;Jun&#39;</span><span class="p">,</span> <span class="c1"># month labels</span>
          <span class="s1">&#39;Jul&#39;</span><span class="p">,</span> <span class="s1">&#39;Aug&#39;</span><span class="p">,</span> <span class="s1">&#39;Sep&#39;</span><span class="p">,</span> <span class="s1">&#39;Oct&#39;</span><span class="p">,</span> <span class="s1">&#39;Nov&#39;</span><span class="p">,</span> <span class="s1">&#39;Dec&#39;</span><span class="p">]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">energy_array</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;CMRmap&#39;</span><span class="p">,</span> <span class="n">linewidths</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="c1"># plot heatmap with Seaborn (sns) library </span>
                <span class="n">xticklabels</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">cbar_kws</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;Daily Energy [kWh/m$^2$]&#39;</span><span class="p">})</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Heat Map of Daily Insolation&#39;</span><span class="p">)</span> <span class="c1"># add title</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">(</span><span class="n">months</span><span class="p">,</span><span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># add the months as tick-labels for the y-axis</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">get_xticklabels</span><span class="p">(),</span><span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># add the days as tick-labels for the x-axis</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Day of the Month&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/manipulating_time_series_65_0.png" src="../_images/manipulating_time_series_65_0.png" />
</div>
</div>
</div>
<div class="section" id="section-summary">
<h2>Section summary<a class="headerlink" href="#section-summary" title="Permalink to this headline">¶</a></h2>
<p>This section has shown how to build and work with a time-series in Python with multiple examples:</p>
<ul class="simple">
<li><p>We have seen how to prepare a DataFrame with <em>DatatimeIndex</em> to be used as a time-series when the timestamps are given in multiple formats.</p></li>
<li><p>Changes in the temporal resolution of the data can be applied by down and up-sampling the data and the differences between 2 available methods (<em>asfreq</em> and <em>resample</em>) have been shown with examples and different sampling frequencies.</p></li>
<li><p>The interpolation of missing data in time-series can be used to up-sample the resolution of the data and examples with some methods have been shown.</p></li>
<li><p>Finally, several ideas to visualize data have been presented.</p></li>
</ul>
<p>Overall, the possibilities with time-series of solar resource are many. The most useful and suitable analysis and visualizations will be determined by the application and scope of the study.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "solar-python/solar-python",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="solar_radiation_modelling.html" title="previous page">Solar Radiation Modelling</a>
    <a class='right-next' id="next-link" href="solar_resource_data_overview.html" title="next page">Overview</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
            &copy; Copyright 2021, Assessing Solar.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>